<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Sample evaluation — BAMSAUR.bff • BAMSAUR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Sample evaluation — BAMSAUR.bff" />
<meta property="og:description" content="This function can be used to evaluate the viability of a sample for use as a reference population. It provides information on the accuracy of a sample using LOOCV, as well as details on the regression analyses performed on the sample." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BAMSAUR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/BAM_vignette.html">BAMSAUR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bbartholdy/BAMSAUR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sample evaluation</h1>
    <small class="dont-index">Source: <a href='https://github.com/bbartholdy/BAMSAUR/blob/master/R/BAMSAURbff.R'><code>R/BAMSAURbff.R</code></a></small>
    <div class="hidden name"><code>BAMSAUR.bff.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function can be used to evaluate the viability of a sample for use as a reference population. It provides information on the accuracy of a sample using LOOCV, as well as details on the regression analyses performed on the sample.</p>
    </div>

    <pre class="usage"><span class='fu'>BAMSAUR.bff</span><span class='op'>(</span>
  <span class='va'>data</span>,
  interval <span class='op'>=</span> <span class='st'>"prediction"</span>,
  level <span class='op'>=</span> <span class='fl'>0.68</span>,
  varmod.method <span class='op'>=</span> <span class='st'>"earth"</span>,
  nfold <span class='op'>=</span> <span class='va'>n</span> <span class='op'>-</span> <span class='fl'>1</span>,
  ncross <span class='op'>=</span> <span class='fl'>3</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Data frame containing one column for ages-at-death and a second column for the associated wear scores.</p></td>
    </tr>
    <tr>
      <th>interval</th>
      <td><p>Character. The type of age interval used. Can be either "prediction" or "confidence" intervals. Confidence intervals are not available for 'earth' class objects.</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>Numeric. Determines level of confidence or prediction intervals. Can be any number between 0 and 1 (not inclusive), but 0.68, 0.90, or 0.95 is recommended. To run the function without intervals, enter 0.</p></td>
    </tr>
    <tr>
      <th>varmod.method</th>
      <td><p>Character. Method for creating the variance model in the 'earth' function. See 'earth' package for more details.</p></td>
    </tr>
    <tr>
      <th>nfold</th>
      <td><p>Numeric. The number of folds to be used in the cross validation.</p></td>
    </tr>
    <tr>
      <th>ncross</th>
      <td><p>Numeric. Number of cross validations. Default is set at 3 to reduce computation time.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments can be passed to the 'earth' function. See ?earth for more details.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function automatically returns a summary of the analysis, with the overall accuracy, the average age range (precision), the sum of squares of the predictive residuals (PRESS),
the R-squared value, AIC(c), and BIC.
It also includes a list containing the following items:</p>
<dl>
 <dt><code>lin.plot</code></dt><dd><p>a plot of the linear regression with prediction/confidence intervals</p></dd>

 <dt><code>quad.plot</code></dt><dd><p>a plot of the quadratic regression with prediction/confidence intervals</p></dd>

 <dt><code>cub.plot</code></dt><dd><p>a plot of the cubic regression with prediction/confidence intervals</p></dd>

 <dt><code>mars.plot</code></dt><dd><p>a plot of the MARS with prediction/confidence intervals</p></dd>

 <dt><code>linear</code></dt><dd><p>class 'lm' object from the linear regression analysis.</p></dd>

 <dt><code>quadratic</code></dt><dd><p>class 'lm' object from the quadratic regression analysis.</p></dd>

 <dt><code>cubic</code></dt><dd><p>class 'lm' object from the cubic regression analysis.</p></dd>

 <dt><code>mars</code></dt><dd><p>class 'earth' object from the MARS analysis.</p></dd>

 <dt><code>lin.data</code></dt><dd><p>the data from the linear LOOCV analysis.</p></dd>

 <dt><code>quad.data</code></dt><dd><p>the data from the quadratic LOOCV analysis.</p></dd>

 <dt><code>cub.data</code></dt><dd><p>the data from the quadratic LOOCV analysis.</p></dd>

 <dt><code>mars.data</code></dt><dd><p>the data from the MARS LOOCV analysis.</p></dd>

 <dt><code>accuracy</code></dt><dd><p>A table with the percentage of estimates whose age ranges contain the actual age, the percentage of estimates within 1 year of the actual age, and within 2 years of the actual age.</p></dd>

</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>BAMSAUR.bff uses the "lm" and "earth" functions for the regression analyses. It automatically provides the accuracy of the sample being evaluated, based on whether the actual age of an individual falls within the estimated age range from linear and quadratic regression analyses (using the described LOOCV method).
It also provides the mean of the estimated age ranges, as an indicator of method precision, as well as the predicted residual error sum of squares (PRESS), the r-squared values, Akaike information criterion (AIC; AICc for sample sizes below 80), Bayes information criterion(BIC), and generalised cross validation (GCV).</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>If the slope of the regression is not statistically different (2 standard deviations) from 0 or 1, a warning message will appear.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/earth/man/earth.html'>earth</a></code></p>
<p><code><a href='https://rdrr.io/r/stats/lm.html'>lm</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#the following expression evaluates the sample with 68% prediction intervals as age ranges</span>
<span class='va'>MBex</span> <span class='op'>&lt;-</span> <span class='fu'>BAMSAUR.bff</span><span class='op'>(</span><span class='va'>MBsimple</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Calculating...
#&gt; </div><div class='output co'>#&gt; <span class='message'>Linear model</span></div><div class='output co'>#&gt; R-squared:	0.93
#&gt; PRESS:		111.12
#&gt; AIC:		183.63
#&gt; BIC:		189.37
#&gt; Accuracy:	84%
#&gt; Average range:	+- 1.5 years
#&gt; 	(min, max: 1.48, 1.51)
#&gt; </div><div class='output co'>#&gt; <span class='message'>Quadratic model</span></div><div class='output co'>#&gt; R-squared:	0.95
#&gt; PRESS:		77.22
#&gt; AIC:		166.81
#&gt; BIC:		173.57
#&gt; Accuracy:	82%
#&gt; Average range:	+- 1.25 years
#&gt; 	(min, max: 1.24, 1.3)
#&gt; </div><div class='output co'>#&gt; <span class='message'>Cubic model</span></div><div class='output co'>#&gt; R-squared:	0.95
#&gt; PRESS:		77.67
#&gt; AIC:		167.85
#&gt; BIC:		176.04
#&gt; Accuracy:	84%
#&gt; Average range:	+- 1.26 years
#&gt; 	(min, max: 1.24, 1.39)
#&gt; </div><div class='output co'>#&gt; <span class='message'>MARS</span></div><div class='output co'>#&gt; R-squared:	0.95
#&gt; PRESS:		89.07
#&gt; GCV:		1.67
#&gt; Accuracy:	78%
#&gt; Average range	+- 1.24 years
#&gt; 	(min, max: 0.79, 1.56)</div><div class='input'><span class='co'>#the following code accesses the quadratic plot</span>
<span class='va'>MBex</span><span class='op'>$</span><span class='va'>quad.plot</span>
</div><div class='img'><img src='BAMSAUR.bff-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Bjørn Peare Bartholdy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


