<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BAMSAUR • BAMSAUR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="BAMSAUR">
<meta property="og:description" content="BAMSAUR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BAMSAUR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/BAM_vignette.html">BAMSAUR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bbartholdy/BAMSAUR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="BAM_vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>BAMSAUR</h1>
                        <h4 class="author">Bjørn Peare Bartholdy</h4>
            
            <h4 class="date">2021-03-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bbartholdy/BAMSAUR/blob/master/vignettes/BAM_vignette.Rmd"><code>vignettes/BAM_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>BAM_vignette.Rmd</code></div>

    </div>

    
    
<p>The BAMSAUR package provides a regression-based method for nonadult age-at-death estimation using dental wear of both the deciduous and permanent dentitions. Additional functions allow the user to evaluate their own reference sample using leave-one-out cross validation (LOOCV) and diagnostic plots.</p>
<p>This package draws on the ‘earth’ function from the ‘earth’ package, so it is recommended to read the instructions for that package: <a href="http://www.milbo.org/doc/earth-notes.pdf" class="uri">http://www.milbo.org/doc/earth-notes.pdf</a></p>
<p>##Functions</p>
<div id="bamsaur" class="section level3">
<h3 class="hasAnchor">
<a href="#bamsaur" class="anchor"></a>BAMSAUR</h3>
<p>The main function calculates the age-at-death of an individual from a single dental wear score (between 0 and 16), using the Middenbeemster (MB11) population as a reference sample. The user can choose between linear, quadratic, and cubic regression, as well as multivariate adaptive regression splines (MARS) to calulate the age. The age range can be calculated using various levels of confidence (CI) or prediction intervals (PI). The recommended method for the MB11 reference sample is quadratic regression using 68% (PI). The user can also choose to upload a data frame with their own reference sample instead of using MB11. Additional arguments can be passed through to the ‘lm’ and ‘earth’ functions. See ?lm and/or ‘earth’ for more details.</p>
<pre><code>#The following example calculates the ages-at-death with 90%PIs of 10 fictional individuals using random wear scores
wear &lt;- runif(10,0,16)
BAMSAUR(wear, interval = "prediction", level = 0.90)

#Age-at-death calculation using MARS
BAMSAUR(wear, model = "mars", interval = "prediciton", level = 0.90)</code></pre>
</div>
<div id="bamsaur-bff" class="section level3">
<h3 class="hasAnchor">
<a href="#bamsaur-bff" class="anchor"></a>BAMSAUR.bff</h3>
<p>This function allows the user to evaluate their own reference sample, using LOOCV. The function requires a data frame containing known ages in the first column and associated dental wear scores in the second column. The default setting is 68%PI to calculate the accuracy.</p>
<pre><code>#the following expression evaluates the sample with 68% prediction intervals as age ranges
MBex &lt;- BAMSAUR.bff(MBsimple)
#the following code accesses the quadratic plot
MBex$quad.plot</code></pre>
</div>
<div id="runbam" class="section level3">
<h3 class="hasAnchor">
<a href="#runbam" class="anchor"></a>runBAM</h3>
<p>This function opens the BAMSAUR shiny app, which is an easy to use graphical user interface with the same functional utility as the separate functions. It is intended for users who are not familiar with R.</p>
<pre><code>##Not run: runBAM()</code></pre>
</div>
<div id="bamsaur-loocv" class="section level3">
<h3 class="hasAnchor">
<a href="#bamsaur-loocv" class="anchor"></a>BAMSAUR.LOOCV</h3>
<p>This function allows you to pass a “lm” or “earth” object through LOOCV and calculate the accuracy of the data that was used to create the model. It’s main use is within the BAMSAUR.bff() function.</p>
<p>##Additional information</p>
</div>
<div id="age-interval-calculation" class="section level3">
<h3 class="hasAnchor">
<a href="#age-interval-calculation" class="anchor"></a>Age interval calculation</h3>
<p>Age intervals are calculated with the following code, based on the formulas for the “interval for the mean value of y for a given value of x” (Altman and Garner 2000: 76-79):</p>
<pre><code>Interval &lt;- function(wear, wear.data, interval, level, df, s) {
alpha &lt;- 1 - level
n &lt;- length(wear.data)

if(interval == "prediction"){
  Int.s &lt;- s * sqrt(1 + (1 / n) + (((wear - mean(wear.data))^2) / ((n - 1)*sd(wear.data)^2)))
  Int &lt;- qt((1-(alpha / 2)), df) * Int.s
  return(Int)
} else if(interval == "confidence") {
  Int.s &lt;- s * sqrt((1 / n) + (((wear - mean(wear.data))^2) / ((n - 1)*sd(wear.data)^2)))
  Int &lt;- qt((1-(alpha / 2)), df) * Int.s
  return(Int)
}

}</code></pre>
<p>###Further reading</p>
<p>More information on the development of the method can be found in Bartholdy, B.P., Hoogland, M.L.P., and Waters-Rist, A., (under review). How Old Are You Now? A new ageing method for nonadults based on dental wear. <em>International Journal of Osteoarchaeology</em>.</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Altman, D.G. and Gardner, M.J. (2000). Regression and correlation. In (eds) Altman, D. G., Machin, D., Bryant, T.N., and Gardner, M.J. (73-92). (2nd ed.). BMJ Books.</p>
<p>R Core Team (2018). R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria. URL <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>.</p>
<p>Stephen Milborrow. Derived from mda:mars by Trevor Hastie and Rob Tibshirani. Uses Alan Miller’s Fortran utilities with Thomas Lumley’s leaps wrapper. (2019). earth: Multivariate Adaptive Regression Splines. R package version 4.7.0. <a href="https://CRAN.R-project.org/package=earth" class="uri">https://CRAN.R-project.org/package=earth</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Bjørn Peare Bartholdy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
